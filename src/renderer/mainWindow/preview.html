<!DOCTYPE html>
<html>

<head>
    <style>
        .text{
            width: 200px;
        }
        .text-container {
            /* 多行截断 */
            display: -webkit-box;     
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            text-overflow: ellipsis;

            /* 布局与伪元素按钮定位 */
            position: relative;
            line-height: 1.5;
            /* 确保行高统一 */
            cursor: pointer;
            /* 点击区域为整个容器 */
        }

        /* 溢出时显示展开按钮 */
        .text-container.overflow::after {
            content: "^展开";
            color: #1890ff;
            /* 蓝色字体 */
            position: absolute;
            right: 0;
            bottom: 0;
            background: white;
            /* 避免遮挡文本 */
            padding-left: 4px;
        }

        /* 展开后隐藏按钮 */
        .text-container.expanded {
            -webkit-line-clamp: unset;
            overflow: visible;
        }

        .text-container.expanded::after {
            display: none;
        }
    </style>
</head>

<body>
    <!-- 文本容器 -->
    <div class="text">
        <div class="text-container" id="textContainer">
            这里是长文本内容，超过两行时会显示展开按钮，点击后完全展开且不可折叠。
        </div>
    </div>


    <script>
        // 初始化时检测文本是否溢出
        function checkTextOverflow() {
            const container = document.getElementById('textContainer');
            const lineHeight = parseInt(getComputedStyle(container).lineHeight);
            const maxHeight = lineHeight * 2; // 两行高度

            // 判断是否溢出
            const isOverflow = container.scrollHeight > maxHeight;
            container.classList.toggle('overflow', isOverflow);
        }

        // 点击后永久展开
        document.getElementById('textContainer').addEventListener('click', () => {
            const container = document.getElementById('textContainer');
            if (container.classList.contains('overflow')) {
                container.classList.add('expanded');
                container.classList.remove('overflow');
            }
        });

        // 监听初始化和窗口变化
        window.addEventListener('DOMContentLoaded', checkTextOverflow);
        window.addEventListener('resize', checkTextOverflow);
    </script>
</body>

</html>