<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="../assets/css/index.css">
    <link rel="stylesheet" type="text/css" href="../assets/css/modal.css">
    <link rel="stylesheet" href="../../../node_modules/flatpickr/dist/flatpickr.min.css">
</head>

<body>
    <div id="titlebar">
        <div id="drag-region">Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªü</div>
        <div id="window-controls">
            <button id="setting" class="control-btn" title="Á≥ªÁªüÈÖçÁΩÆ">‚öô</button>
            <button id="minimize" class="control-btn">
                <svg class="control-icon" viewBox="0 0 10 10">
                    <path d="M2 3l3 3 3-3" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                </svg>
            </button>
            <button id="close" class="control-btn">
                <svg class="control-icon" viewBox="0 0 10 10">
                    <path d="M3 3l4 4M7 3L3 7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" />
                </svg>
            </button>
        </div>
    </div>
    <div class="main-container">
        <div class="vertical-tabbar">
            <button class="tab-btn active" data-tab="create">üìÑ Êñ∞Âª∫ÊñáÊ°£</button>
            <button class="tab-btn" data-tab="view-normal">üìÇ Êü•ÈòÖÊôÆÈÄöÊñáÊ°£</button>
            <button class="tab-btn" data-tab="view-important">üìÇ Êü•ÈòÖÈáçË¶ÅÊñáÊ°£</button>
            <button class="tab-btn" data-tab="name-manager">üìÇ ÂßìÂêçÁÆ°ÁêÜ</button>
        </div>

        <!-- Âè≥‰æßÂÜÖÂÆπÂå∫ -->
        <div class="content-panel">
            <!-- Êñ∞Âª∫ÊñáÊ°£ÂÜÖÂÆπ -->
            <div id="create-tab" class="tab-content active">
                <div class="newDoc-content">
                    <div class="newDoc-body">
                        <form id="newDoc-docForm">
                            <div class="form-group">
                                <label for="docTitle">Ê†áÈ¢òÔºö</label>
                                <input type="text" id="docTitle" required maxlength="100">
                            </div>
                            <div class="form-group">
                                <label for="sender_unit">Êù•ÊñáÂçï‰ΩçÔºö</label>
                                <input type="text" id="sender_unit" required>
                            </div>
                            <div class="form-group">
                                <label for="sender_number">Êù•ÊñáÁºñÂè∑Ôºö</label>
                                <input type="text" id="sender_number" required>
                            </div>
                            <div class="form-group">
                                <label for="original_number">ÂéüÊñáÂè∑Ôºö</label>
                                <input type="text" id="original_number">
                            </div>
                            <div class="form-group">
                                <label for="drafting_unit">Âà∂ÊñáÂçï‰ΩçÔºö</label>
                                <input type="text" id="drafting_unit" required>
                            </div>
                            <!-- ÂèåÂàóÂ∏ÉÂ±ÄË°å -->
                            <div class="form-row">
                                <!-- ÂëàÈòÖÈ¢ÜÂØº -->
                                <div class="form-group">
                                    <label for="review_leader">ÂëàÈòÖÈ¢ÜÂØºÔºö</label>
                                    <select id="review_leader" required>
                                    </select>
                                </div>

                                <!-- ÂØÜÁ∫ß -->
                                <div class="form-group">
                                    <label for="secrecy_level">ÂØÜÁ∫ßÔºö</label>
                                    <select id="secrecy_level" required>
                                        <option value="ÊôÆÈÄö">ÊôÆÈÄö</option>
                                        <option value="ÁßòÂØÜ">ÁßòÂØÜ</option>
                                        <option value="Êú∫ÂØÜ">Êú∫ÂØÜ</option>
                                        <option value="ÁªùÂØÜ">ÁªùÂØÜ</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <!-- ÂÆ°Ê†∏È¢ÜÂØº -->
                                <div class="form-group">
                                    <label for="crgency_level">Á¥ßÊÄ•Á®ãÂ∫¶Ôºö</label>
                                    <select id="crgency_level" required>
                                        <option value="ÊôÆÈÄö">ÊôÆÈÄö</option>
                                        <option value="Âä†ÊÄ•">Âä†ÊÄ•</option>
                                        <option value="ÁâπÊÄ•">ÁâπÊÄ•</option>
                                    </select>
                                </div>
                                <!-- ‰øùÂØÜÊúüÈôê -->
                                <div class="form-group">
                                    <label for="secrecy_period">‰øùÂØÜÊúüÈôêÔºö</label>
                                    <select id="secrecy_period" required>
                                        <option value="1Âπ¥">1Âπ¥</option>
                                        <option value="5Âπ¥">5Âπ¥</option>
                                        <option value="10Âπ¥">10Âπ¥</option>
                                        <option value="20Âπ¥">20Âπ¥</option>
                                        <option value="ÈïøÊúü">ÈïøÊúü</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-actions">
                                <button id="print" class="newDoc-btn cancel">ÊâìÂç∞</button>
                                <button type="reset" class="newDoc-btn cancel">ÈáçÁΩÆ</button>
                                <button type="submit" name="docType" value="normal"
                                    class="newDoc-btn primary">ÂàõÂª∫ÊôÆÈÄöÊñáÊ°£</button>
                                <button type="submit" name="docType" value="important"
                                    class="newDoc-btn primary">ÂàõÂª∫ÈáçË¶ÅÊñáÊ°£</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Êü•ÈòÖÊñáÊ°£ÂÜÖÂÆπ -->
            <div id="view-normal-tab" class="tab-content">
                <ol id="docList-normal" class="doc-list" style="height:100%"></ol>
            </div>

            <!-- Êü•ÈòÖÊñáÊ°£ÂÜÖÂÆπ -->
            <div id="view-important-tab" class="tab-content">
                <ol id="docList-important" class="doc-list" style="height:100%"></ol>
            </div>

            <!-- ÂßìÂêçÁÆ°ÁêÜ -->
            <div id="name-manager-tab" class="tab-content">
                <div class="name-manager-container">
                    <div class="add-name">
                        <input type="text" id="name" placeholder="ËØ∑ËæìÂÖ•ÂßìÂêç" class="add-name-real" />
                        <input type="text" id="alias" placeholder="ËØ∑ËæìÂÖ•Â∏∏Áî®Áß∞Âëº" class="add-name-alias" />
                        <button id="add-name-btn" class="btnadd-name">Ê∑ªÂä†</button>
                    </div>
                    <div id="name-tree" class="collapsible-container"></div>
                </div>
            </div>
        </div>
    </div>
    <template id="docItemTemplate">
        <div class="doc-item">
            <div class="doc-info">
                <span class="doc-title"></span>
                <span class="doc-date"></span>
                <div class="doc-meta">
                    <span class="doc-sender_unit"></span>
                    <span class="doc-info doc-sender_number"></span>
                    <span class="doc-info doc-original_number"></span>
                    <span class="doc-info doc-drafting_unit"></span>
                </div>
            </div>
            <div class="doc-actions">
                <button id="toImportant" class="action-btn toimportant-btn" title="ËΩ¨‰∏∫ÈáçË¶ÅÊñá‰ª∂">üìë</button>
                <button id="editForm" class="action-btn edit-btn" title="ÁºñËæëÊñáÊ°£">‚úèÔ∏è</button>
                <button class="action-btn annotate-btn" title="Ê∑ªÂä†ÊâπÊ≥®">üí¨</button>
                <button id="deleteDoc" class="action-btn delete-btn" title="Âà†Èô§ÊñáÊ°£">üóëÔ∏è</button>
            </div>
        </div>
    </template>
    <template id="docItemTemplate-important">
        <div class="doc-item-important">
            <div class="doc-info-important">
                <span class="doc-title-important"></span>
                <span class="doc-date-important"></span>
                <div class="doc-meta-important">
                    <span class="doc-sender_unit-important"></span>
                    <span class="doc-info doc-sender_number-important"></span>
                    <span class="doc-info doc-original_number-important"></span>
                    <span class="doc-info doc-drafting_unit-important"></span>
                </div>
            </div>
            <div class="doc-actions-important">
                <button id="editForm-important" class="action-btn edit-btn" title="ÁºñËæëÊñáÊ°£">‚úèÔ∏è</button>
                <button class="action-btn annotate-btn" title="Ê∑ªÂä†ÊâπÊ≥®">üí¨</button>
                <button id="deleteDoc-important" class="action-btn delete-btn" title="Âà†Èô§ÊñáÊ°£">üóëÔ∏è</button>
            </div>
        </div>
    </template>

    <!-- ÂßìÂêçÊäòÂè†ÂàóË°® -->
    <template id="collapsible-item-template">
        <div class="collapsible-item">
            <div class="collapsible-header">
                <span class="toggle-icon"></span>
                <span class="author-name"></span>
                <button class="delete-author" title="Âà†Èô§‰ΩúËÄÖÂèäÂÖ∂ÊâÄÊúâÂà´Âêç">√ó</button>
            </div>
            <div class="collapsible-content"></div>
        </div>
    </template>

    <template id="alias-item-template">
        <div class="alias-item">
            <span class="alias-name"></span>
            <button class="delete-alias" title="Âà†Èô§ËØ•Âà´Âêç">√ó</button>
        </div>
    </template>

    <div id="docModal" class="modal">
        <div class="pop-bg">
            <div class="pop-content">
                <div class="modal-header">
                    <span class="pop-title-header">ÁºñËæëÊñáÊ°£</span>
                    <img id="docinfo-close" src="../assets/image/close.png" />
                </div>
                <div class="modal-body">
                    <form id="pop-docForm">
                        <div class="form-group">
                            <label for="docTitle">Ê†áÈ¢òÔºö</label>
                            <input type="text" id="pop-docTitle" required maxlength="100">
                        </div>
                        <div class="form-group">
                            <label for="sender_unit">Êù•ÊñáÂçï‰ΩçÔºö</label>
                            <input type="text" id="pop-sender_unit" required>
                        </div>
                        <div class="form-group">
                            <label for="sender_number">Êù•ÊñáÁºñÂè∑Ôºö</label>
                            <input type="text" id="pop-sender_number" required>
                        </div>
                        <div class="form-group">
                            <label for="original_number">ÂéüÊñáÂè∑Ôºö</label>
                            <input type="text" id="pop-original_number">
                        </div>
                        <div class="form-group">
                            <label for="drafting_unit">Âà∂ÊñáÂçï‰ΩçÔºö</label>
                            <input type="text" id="pop-drafting_unit" required>
                        </div>
                        <!-- ÂèåÂàóÂ∏ÉÂ±ÄË°å -->
                        <div class="form-row">
                            <!-- ÂëàÈòÖÈ¢ÜÂØº -->
                            <div class="form-group">
                                <label for="review_leader">ÂëàÈòÖÈ¢ÜÂØºÔºö</label>
                                <select id="pop-review_leader" required>
                                </select>
                            </div>

                            <!-- ÂØÜÁ∫ß -->
                            <div class="form-group">
                                <label for="secrecy_level">ÂØÜÁ∫ßÔºö</label>
                                <select id="pop-secrecy_level" required>
                                    <option value="ÊôÆÈÄö">ÊôÆÈÄö</option>
                                    <option value="ÁßòÂØÜ">ÁßòÂØÜ</option>
                                    <option value="Êú∫ÂØÜ">Êú∫ÂØÜ</option>
                                    <option value="ÁªùÂØÜ">ÁªùÂØÜ</option>
                                </select>
                            </div>
                        </div>

                        <div class="form-row">
                            <!-- ÂÆ°Ê†∏È¢ÜÂØº -->
                            <div class="form-group">
                                <label for="crgency_level">Á¥ßÊÄ•Á®ãÂ∫¶Ôºö</label>
                                <select id="pop-crgency_level" required>
                                    <option value="ÊôÆÈÄö">ÊôÆÈÄö</option>
                                    <option value="Âä†ÊÄ•">Âä†ÊÄ•</option>
                                    <option value="ÁâπÊÄ•">ÁâπÊÄ•</option>
                                </select>
                            </div>
                            <!-- ‰øùÂØÜÊúüÈôê -->
                            <div class="form-group">
                                <label for="secrecy_period">‰øùÂØÜÊúüÈôêÔºö</label>
                                <select id="pop-secrecy_period" required>
                                    <option value="1Âπ¥">1Âπ¥</option>
                                    <option value="5Âπ¥">5Âπ¥</option>
                                    <option value="10Âπ¥">10Âπ¥</option>
                                    <option value="20Âπ¥">20Âπ¥</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="newDoc-btn cancel">ÂèñÊ∂à</button>
                            <button type="submit" class="newDoc-btn primary">Êõ¥Êñ∞</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <div id="annotate" class="annotate-box">
        <div class="annotate-bg">
            <div class="annotate-content">
                <div class="modal-header">
                    <span class="annotate-title-header">Ê∑ªÂä†ÊâπÊ≥®</span>
                    <img id="annotate-close" src="../assets/image/close.png" />
                </div>
                <div class="modal-body">
                    <form id="annotate-Form">

                        <div class="form-group">
                            <label for="annotate-intype">ËØ∑ÈÄâÊã©ÂΩïÂÖ•ÊñπÂºèÔºö</label>
                            <select id="annotate-intype">
                                <option value="1">ÊâãÂä®ÂΩïÂÖ•</option>
                                <option value="2">ÂÜÖÂÆπ‰∏çÂΩïÂÖ•</option>
                                <option value="3">‰ªÖÂúàÈòÖ</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="annotate-note">ÂßìÂêçÔºö</label>
                            <select id="annotate-author">
                                <option value="">ËØ∑ÈÄâÊã©</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="annotate-content">ÂÜÖÂÆπÔºö</label>
                            <input type="text" id="annotate-content" placeholder="ËØ∑ËæìÂÖ•ÂÜÖÂÆπ..." required></input>
                        </div>
                        <div class="form-group">
                            <label for="annotate-note">Â§áÊ≥®Ôºö</label>
                            <input type="text" id="annotate-note" placeholder="ËØ∑ËæìÂÖ•Â§áÊ≥®..." required></input>
                        </div>
                        
                        <div class="form-group">
                            <label for="annotate-date">ÊâπÊ≥®Êó•ÊúüÔºö</label>
                            <input type="text" id="annotate-date" placeholder="ÈÄâÊã©Êó•Êúü">
                        </div>

                        <!-- ÂèåÂàóÂ∏ÉÂ±ÄË°å -->
                        <div class="annotate-form-row">
                            <div class="form-group">
                                <label for="primary-unit">ÂàÜÂèëËåÉÂõ¥Ôºö</label>
                                <select id="primary-unit">
                                    <option value="">ËØ∑ÈÄâÊã©</option>
                                </select>
                                <select id="secondary-unit">
                                    <option value="">ËØ∑ÈÄâÊã©</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="fenfa-date">ÂàÜÂèëÊó•ÊúüÔºö</label>
                                <input type="text" id="fenfa-date" placeholder="ÈÄâÊã©Êó•Êúü">
                            </div>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="newDoc-btn cancel">ÂèñÊ∂à</button>
                            <button type="submit" class="newDoc-btn primary">ÂàõÂª∫</button>
                        </div>
                    </form>
                </div>

            </div>
        </div>
    </div>
    <div id="show-allinfo" class="annotate-box">
        <div class="annotate-bg">
            <div class="annotate-content">
                <span id="doc_info"></span>
                <span id="annotate-info"></span>
            </div>
        </div>
    </div>
    <!-- ÈÖçÁΩÆÁÆ°ÁêÜÁïåÈù¢ -->
    <div id="config-modal" class="annotate-box">
        <div class="annotate-bg">
            <div id="annotate-unit" class="annotate-content">
                <div class="modal-header">
                    <!-- <div id="close-config">X</div> -->
                    <span class="pop-title-header">Âçï‰ΩçÈÖçÁΩÆÁÆ°ÁêÜ</span>
                    <img id="config-close" src="../assets/image/close.png" />
                </div>
                <div class="modal-body">
                    <!-- ÊâπÊ≥®ÈÖçÁΩÆ -->
                    <div id="form-annotate" class="config-content">
                        <div class="config-section">
                            <h3>Âçï‰ΩçÂ±ÇÁ∫ßÈÖçÁΩÆ</h3>
                            <div class="add-name">
                                <input type="text" id="unit" placeholder="ËØ∑ËæìÂÖ•Âçï‰Ωç" class="add-name-real" />
                                <input type="text" id="unit-son" placeholder="ËØ∑ËæìÂÖ•Â≠êÂçï‰Ωç" class="add-name-alias" />
                                <button id="add-unit-btn" class="btnadd-name">Ê∑ªÂä†</button>
                            </div>
                            <div id="unit-tree" class="collapsible-container"></div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="newDoc-btn cancel" onclick="hideConfigModal()">ÂèñÊ∂à</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <template id="collapsible-item-unit">
        <div class="collapsible-unit">
            <div class="collapsible-unit-header">
                <span class="unit-toggle-icon"></span>
                <span class="unit-name"></span>
                <button class="delete-unit" title="Âà†Èô§Âçï‰ΩçÂèäÊâÄÊúâÂ≠êÂçï‰Ωç">√ó</button>
            </div>
            <div class="collapsible-unit-content"></div>
        </div>
    </template>

    <template id="unitson-item-template">
        <div class="unitson-item">
            <span class="unitson-name"></span>
            <button class="delete-unitson" title="Âà†Èô§ËØ•Â≠êÂÖ¨Âè∏">√ó</button>
        </div>
    </template>
    <div id="mentionList" class="mention-popup"></div>
    <script src="../../../node_modules/flatpickr/dist/flatpickr.min.js"></script>
    <script src="../../../node_modules/flatpickr/dist/l10n/zh.js"></script>
    <script src="./renderer.js"></script>
</body>

</html>